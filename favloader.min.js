/**@license
 *
 * favloader v. 0.4.3
 *
 * Vanilla JavaScript library for loading animation in favicon
 *
 * Copyright (c) 2018-2019 Jakub T. Jankiewicz <https://jcubic.pl/me>
 * Released under the MIT license
 *
 * Build: Mon, 04 Nov 2019 15:53:12 +0000
 */
(function(e){var t=typeof window!=="undefined"?window:global;if(typeof define==="function"&&define.amd){define([],e)}else if(typeof module==="object"&&module.exports){module.exports=e()}else{t.favloader=e()}})(function(e){function t(e){var t="("+e.toString()+")()";var n=window.URL||window.webkitURL;var i;try{i=new Blob([t],{type:"application/javascript"})}catch(e){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;i=new BlobBuilder;i.append(t);i=i.getBlob()}return new Worker(n.createObjectURL(i))}var n=function(){var o=t(function(){var e=["ms","moz","webkit","o"];for(var t=0;t<e.length&&!self.requestAnimationFrame;++t){self.requestAnimationFrame=self[e[t]+"RequestAnimationFrame"];self.cancelAnimationFrame=self[e[t]+"CancelAnimationFrame"]||self[e[t]+"CancelRequestAnimationFrame"]}var r={};self.addEventListener("message",function(e){var t=e.data;var n=t.id;if(t.type!=="RPC"||n===null){return}if(t.method=="setInterval"){var i=t.params[0];r[i]=self.setInterval(function(){self.postMessage({type:"interval",id:i})},t.params[1]);self.postMessage({type:"RPC",id:n,result:i})}else if(t.method=="clearInterval"){self.clearInterval(r[t.params[0]]);delete r[t.params[0]]}})});var i={};var r=function(){var i=0;return function e(t,n){var r=++i;return new Promise(function(i){o.addEventListener("message",function e(t){var n=t.data;if(n&&n.type==="RPC"&&n.id===r){i(n.result);o.removeEventListener("message",e)}});o.postMessage({type:"RPC",method:t,id:r,params:n})})}}();o.addEventListener("message",function(e){var t=e.data;if(t&&t.type==="interval"&&i[t.id]){i[t.id]()}});return{set:function(e,t){var n=Date.now();i[n]=e;r("setInterval",[n,t]);return n},clear:function(e){delete i[e];return r("clearInterval",[e])}}}();var i,r;if(typeof document.hidden!=="undefined"){i="hidden";r="visibilitychange"}else if(typeof document.msHidden!=="undefined"){i="msHidden";r="msvisibilitychange"}else if(typeof document.webkitHidden!=="undefined"){i="webkitHidden";r="webkitvisibilitychange"}function o(e){if(console&&console.warn){console.warn(e)}else{setTimeout(function(){throw new Error(e)},0)}}var a,s,l,d,u,f=0,c,m,v,p,w,h=-.25,b,y;function g(e){if(document.readyState!=="complete"){setTimeout(g.bind(this,e),100);return}v=Object.assign({size:16,radius:6,thickness:2,color:"#0F60A8",duration:5e3},e);if(!l){l=document.querySelector('link[rel*="icon"]');if(!l){l=document.createElement("link");l.setAttribute("rel","icon");document.head.appendChild(l);o("No default icon found, restore state will not work")}else{d=l.getAttribute("href");w=l.getAttribute("type")}}k();if(v.gif){if(typeof parseGIF==="undefined"){throw new Error("parseGIF not defined, please include parseGIF.js file")}parseGIF(v.gif).then(function(e){p=e})}else{if(!s){s=document.createElement("canvas")}s.width=s.height=v.size;a=s.getContext("2d");a.lineCap="round";a.lineWidth=v.thickness;a.strokeStyle=v.color;c=v.duration}m=true}function k(){if(b){n.clear(b);b=null}}function A(){if(d){l.setAttribute("href",d+"?"+Date.now());l.setAttribute("type",w)}else if(l){l.parentNode.removeChild(l)}k()}function F(){if(!l){throw new Error("[Favaloder] You need to call init first")}if(!m){setTimeout(F,100);return}f=0;if(v.gif&&parseGIF){if(!p){setTimeout(F,100);return}b=n.set(I,20)}else{b=n.set(L,20)}}function B(e){return(e+h)*2*Math.PI}function I(){f++;if(f>=p.uris.length){f=0}E(p.uris[f])}function C(e){return B(e+h)+B(Math.max(0,e*2-1))}function R(e){return B(e+h)+B(Math.min(1,e*2))}function E(e){var t,n=document.querySelector('link[rel*="icon"]');(t=n.cloneNode(true)).setAttribute("href",e);n.parentNode.replaceChild(t,n);l=t}function L(){a.clearRect(0,0,v.size,v.size);if(typeof v.frame==="function"){v.frame(a)}else{var e=f%c/c;a.beginPath();var t=Math.round(v.size/2);a.arc(t,t,v.radius,C(e),R(e));a.stroke()}E(a.canvas.toDataURL());f+=c/100}return{init:g,start:F,stop:A,version:"0.4.3"}});